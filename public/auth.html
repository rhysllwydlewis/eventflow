<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes">
  <meta name="theme-color" content="#0B8073">
  <title>Sign in / Create account â€” EventFlow</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <link rel="stylesheet" href="/assets/css/eventflow-17.0.0.css">
  <link rel="stylesheet" href="/assets/css/utilities.css">
  <link rel="stylesheet" href="/assets/css/components.css">
  <link rel="stylesheet" href="/assets/css/animations.css">
  <link rel="stylesheet" href="/assets/css/mobile-optimizations.css">
  <link rel="stylesheet" href="/assets/css/ui-ux-fixes.css">
  <link rel="icon" href="/favicon.svg">
</head>
<body>
<header class="header" role="banner">
  <div class="container header-inner">
    <a class="brand" href="/" aria-label="EventFlow home">
      <span class="logo" aria-hidden="true"></span>
      <span class="brand-text">EventFlow</span>
    </a>
    <div class="header-actions">
      <nav class="nav nav-inline" aria-label="Quick navigation">
        <a href="/start.html" class="nav-link nav-main">Plan</a>
        <a href="/suppliers.html" class="nav-link nav-main">Suppliers</a>
        <a href="/pricing.html" class="nav-link nav-main">Pricing</a>
        <a href="/blog.html" class="nav-link nav-main">Blog</a>
        <a href="/auth.html" class="nav-link nav-main nav-main-login">Log in</a>
      </nav>
      <button id="notification-bell" class="icon-button" type="button" aria-label="Notifications" style="display:none;">
        <span class="notification-icon">ðŸ””</span>
        <span class="notification-badge" style="display:none;">0</span>
      </button>
      <button id="burger" class="nav-toggle" type="button" aria-label="Toggle navigation" aria-expanded="false">
        <span class="nav-toggle-bar"></span>
        <span class="nav-toggle-bar"></span>
        <span class="nav-toggle-bar"></span>
      </button>
      </div>
  </div>
  <nav class="nav nav-menu" aria-label="Primary navigation">
    <a href="/start.html">Plan an Event</a>
    <a href="/suppliers.html">Suppliers</a>
    <a href="/plan.html">My Plan</a>
    <a href="/blog.html">Blog</a>
    <a href="/for-suppliers.html">For Suppliers</a>
    <a href="/faq.html">FAQ</a>
    <a href="/settings.html">Settings</a>
    <a href="/auth.html" id="nav-auth">Log in</a>
    <a href="#" id="nav-dashboard" style="display:none">Dashboard</a>
    <a href="#" id="nav-signout" style="display:none">Sign out</a>
  </nav>
</header>
<script src="/assets/js/auth-nav.js" defer></script>
<script src="/assets/js/components.js" defer></script>
<script src="/assets/js/animations.js" defer></script>
<script src="/assets/js/notifications.js" defer></script>
<script src="/assets/js/websocket-client.js" defer></script>

<main class="section">
  <div class="container">
    <h1>Account</h1>
    <div style="display:flex;gap:10px;border:1px solid #e3e9ef;border-radius:10px;overflow:hidden;width:max-content">
      <button id="tab-signin" aria-selected="true" style="padding:10px 14px;border:none;background:#fff;cursor:pointer">Log in</button>
      <button id="tab-create" aria-selected="false" style="padding:10px 14px;border:none;background:#f7fafc;cursor:pointer">Create a free account</button>
    </div>
    <section id="panel-signin" style="margin-top:12px">
      <form id="login-form" class="card" action="#">
        <div class="form-row"><label for="login-email">Email</label><input id="login-email" name="email" type="email" required placeholder="you@example.com" aria-required="true" autocomplete="email"></div>
        <div class="form-row"><label for="login-password">Password</label><input id="login-password" name="password" type="password" required placeholder="Your password" aria-required="true" autocomplete="current-password"></div>
        <div class="form-row">
          <div id="login-error" class="error" style="display: none; visibility: hidden; color: #b00020; font-size: 0.875rem;" aria-live="polite" aria-hidden="true"></div>
        </div>
        <div class="form-row">
          <label class="small checkbox-label-right" for="login-remember">
            Remember me
            <input type="checkbox" id="login-remember" name="remember">
          </label>
        </div>
        <div class="form-actions"><button class="cta" type="submit">Log in</button><span class="small" id="login-status" role="status" aria-live="polite"></span></div>
        <div id="resend-verification-container" style="display:none;margin-top:12px;">
          <button type="button" class="cta" id="resend-verification-btn">Resend Verification Email</button>
        </div>
        <p class="small"><a href="#" id="forgot-password-link">Forgot your password?</a></p>
      </form>
    </section>
    <section id="panel-create" hidden style="margin-top:12px">
      <form id="register-form" class="card" action="#">
        <div class="form-row">
          <label for="reg-firstname">First Name</label>
          <input id="reg-firstname" name="firstname" required aria-required="true" autocomplete="given-name" placeholder="Your first name">
        </div>
        <div class="form-row">
          <label for="reg-lastname">Surname</label>
          <input id="reg-lastname" name="lastname" required aria-required="true" autocomplete="family-name" placeholder="Your surname">
        </div>
        <div class="form-row">
          <label for="reg-email">Email</label>
          <input id="reg-email" name="email" type="email" required aria-required="true" aria-describedby="email-validation-msg" autocomplete="email">
          <span class="small" id="email-validation-msg" style="display:none;color:#b00020" aria-live="polite"></span>
        </div>
        <div class="form-row">
          <label for="reg-password">Password</label>
          <input id="reg-password" name="password" type="password" required placeholder="Min 8 chars incl. a letter and a number" aria-required="true" aria-describedby="password-strength-msg" autocomplete="new-password">
          <span class="small" id="password-strength-msg" style="margin-top:4px;display:block" role="status"></span>
        </div>
        <div class="form-row">
          <label for="reg-location">Location (UK County) *</label>
          <select id="reg-location" name="location" required aria-required="true">
            <option value="">Select your county...</option>
            <option value="Bedfordshire">Bedfordshire</option>
            <option value="Berkshire">Berkshire</option>
            <option value="Bristol">Bristol</option>
            <option value="Buckinghamshire">Buckinghamshire</option>
            <option value="Cambridgeshire">Cambridgeshire</option>
            <option value="Cheshire">Cheshire</option>
            <option value="Cornwall">Cornwall</option>
            <option value="Cumbria">Cumbria</option>
            <option value="Derbyshire">Derbyshire</option>
            <option value="Devon">Devon</option>
            <option value="Dorset">Dorset</option>
            <option value="Durham">Durham</option>
            <option value="East Sussex">East Sussex</option>
            <option value="Essex">Essex</option>
            <option value="Gloucestershire">Gloucestershire</option>
            <option value="Greater London">Greater London</option>
            <option value="Greater Manchester">Greater Manchester</option>
            <option value="Hampshire">Hampshire</option>
            <option value="Herefordshire">Herefordshire</option>
            <option value="Hertfordshire">Hertfordshire</option>
            <option value="Isle of Wight">Isle of Wight</option>
            <option value="Kent">Kent</option>
            <option value="Lancashire">Lancashire</option>
            <option value="Leicestershire">Leicestershire</option>
            <option value="Lincolnshire">Lincolnshire</option>
            <option value="Merseyside">Merseyside</option>
            <option value="Norfolk">Norfolk</option>
            <option value="North Yorkshire">North Yorkshire</option>
            <option value="Northamptonshire">Northamptonshire</option>
            <option value="Northumberland">Northumberland</option>
            <option value="Nottinghamshire">Nottinghamshire</option>
            <option value="Oxfordshire">Oxfordshire</option>
            <option value="Rutland">Rutland</option>
            <option value="Shropshire">Shropshire</option>
            <option value="Somerset">Somerset</option>
            <option value="South Yorkshire">South Yorkshire</option>
            <option value="Staffordshire">Staffordshire</option>
            <option value="Suffolk">Suffolk</option>
            <option value="Surrey">Surrey</option>
            <option value="Tyne and Wear">Tyne and Wear</option>
            <option value="Warwickshire">Warwickshire</option>
            <option value="West Midlands">West Midlands</option>
            <option value="West Sussex">West Sussex</option>
            <option value="West Yorkshire">West Yorkshire</option>
            <option value="Wiltshire">Wiltshire</option>
            <option value="Worcestershire">Worcestershire</option>
            <option value="Wales">Wales</option>
            <option value="Scotland">Scotland</option>
            <option value="Northern Ireland">Northern Ireland</option>
          </select>
        </div>
        <div class="form-row">
          <label for="reg-postcode">Postcode (Optional)</label>
          <input id="reg-postcode" name="postcode" type="text" placeholder="e.g. SW1A 1AA" autocomplete="postal-code">
        </div>
        <div class="form-row">
          <label for="reg-role">I am aâ€¦</label>
          <div class="role-toggle" role="radiogroup" aria-label="Account type">
            <button type="button" class="role-pill is-active" data-role="customer">Customer</button>
            <button type="button" class="role-pill" data-role="supplier">Supplier</button>
          </div>
          <input type="hidden" id="reg-role" name="role" value="customer">
        </div>
        <!-- Supplier-specific fields (shown when supplier role is selected) -->
        <div id="supplier-fields" style="display:none">
          <div class="form-row">
            <label for="reg-company">Company Name *</label>
            <input id="reg-company" name="company" type="text" placeholder="Your business name" autocomplete="organization">
          </div>
          <div class="form-row">
            <label for="reg-jobtitle">Job Title (Optional)</label>
            <input id="reg-jobtitle" name="jobtitle" type="text" placeholder="e.g. Event Manager" autocomplete="organization-title">
          </div>
          <div class="form-row">
            <label for="reg-website">Website (Optional)</label>
            <input id="reg-website" name="website" type="url" placeholder="https://example.com" autocomplete="url">
          </div>
          <div class="form-row">
            <label>Social Media (Optional)</label>
            <input id="reg-instagram" name="instagram" type="url" placeholder="Instagram URL" style="margin-bottom:8px">
            <input id="reg-facebook" name="facebook" type="url" placeholder="Facebook URL" style="margin-bottom:8px">
            <input id="reg-twitter" name="twitter" type="url" placeholder="Twitter/X URL" style="margin-bottom:8px">
            <input id="reg-linkedin" name="linkedin" type="url" placeholder="LinkedIn URL">
          </div>
        </div>
        <div class="form-row">
          <label for="reg-avatar">Profile Picture (Optional)</label>
          <input id="reg-avatar" name="avatar" type="file" accept="image/jpeg,image/jpg,image/png,image/webp">
          <span class="small" style="color:#666;margin-top:4px;display:block">Max 5MB. Formats: JPEG, PNG, WebP</span>
        </div>
        <div class="form-row">
          <label class="small checkbox-label-right" for="reg-marketing">
            Send me the occasional EventFlow update and planning tips.
            <input type="checkbox" id="reg-marketing" name="marketing">
          </label>
        </div>
        <div class="form-row">
          <label class="small checkbox-label-right" for="reg-terms">
            I agree to the <a href="/terms.html" target="_blank">Terms</a> and <a href="/privacy.html" target="_blank">Privacy Policy</a>. *
            <input type="checkbox" id="reg-terms" name="terms" required aria-required="true">
          </label>
        </div>
        <div class="form-actions">
          <button class="cta" type="submit">Create account</button>
          <span class="small" id="reg-status" role="status" aria-live="polite"></span>
        </div>
      </form>
    </section>
    <!-- Load utilities -->
    <script src="/assets/js/utils/form-validator.js" defer></script>
    <script src="/assets/js/components/ErrorBoundary.js" defer></script>
    <script src="/assets/js/utils/keyboard-nav.js" defer></script>
    <script src="/assets/js/utils/mobile-enhancements.js" defer></script>
    
    <script src="/assets/js/pages/auth-init.js" defer></script>
    <script src="/assets/js/app.js" defer></script>
    <script>window.__EF_PAGE__='auth'</script>
    
    <!-- Fetch CSRF token on page load -->
    <script>
      (async function() {
        try {
          const response = await fetch('/api/csrf-token', {
            method: 'GET',
            credentials: 'include'
          });
          if (response.ok) {
            const data = await response.json();
            window.__CSRF_TOKEN__ = data.csrfToken;
            console.log('CSRF token fetched successfully');
          } else {
            console.error('Failed to fetch CSRF token:', response.statusText);
          }
        } catch (error) {
          console.error('Error fetching CSRF token:', error);
        }
      })();
    </script>
    
    <!-- Initialize form validation -->
    <script defer>
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize error boundary
        window.errorBoundary = new ErrorBoundary({
          onError: function(errorInfo) {
            console.error('Error caught:', errorInfo);
          }
        });
        
        // Initialize form validation for login form
        const loginForm = document.querySelector('#login-form');
        if (loginForm) {
          const loginValidator = new FormValidator(loginForm, {
            validateOnBlur: true,
            validateOnInput: false
          });
          
          // Store reference to validator for other scripts
          loginForm._validator = loginValidator;
          
          // Override the handleSubmit to also show #login-error
          const originalHandleSubmit = loginValidator.handleSubmit.bind(loginValidator);
          loginValidator.handleSubmit = function(e) {
            const result = originalHandleSubmit(e);
            const loginErrorEl = document.getElementById('login-error');
            
            // Show #login-error if validation failed
            if (!result && loginErrorEl) {
              const errors = loginValidator.getErrors();
              if (errors.length > 0) {
                const errorMessages = errors.map(([field, msg]) => msg).join(', ');
                loginErrorEl.textContent = errorMessages || 'Please fix the errors above';
                loginErrorEl.style.display = 'block';
                loginErrorEl.style.visibility = 'visible';
                loginErrorEl.setAttribute('aria-hidden', 'false');
              }
            } else if (result && loginErrorEl) {
              // Clear errors when validation passes
              loginErrorEl.textContent = '';
              loginErrorEl.style.display = 'none';
              loginErrorEl.style.visibility = 'hidden';
              loginErrorEl.setAttribute('aria-hidden', 'true');
            }
            // Don't clear the error here - let app.js manage #login-error for API responses
            return result;
          };
          
          // Listen for valid submissions
          loginForm.addEventListener('validsubmit', function(e) {
            const formData = e.detail;
            console.log('Login form validated:', formData);
            // The existing auth-init.js will handle the actual submission
          });
        }
        
        // Initialize form validation for registration form
        const registerForm = document.querySelector('#register-form');
        if (registerForm) {
          const registerValidator = new FormValidator(registerForm, {
            validateOnBlur: true,
            validateOnInput: false
          });
          
          // Add custom password strength validation
          registerValidator.addValidator('reg-password', {
            required: true,
            password: true,
            minLength: 8
          });
          
          // Listen for valid submissions
          registerForm.addEventListener('validsubmit', function(e) {
            const formData = e.detail;
            console.log('Register form validated:', formData);
            // The existing auth-init.js will handle the actual submission
          });
        }
      });
    </script>
  </div>
</main>

<footer class="footer" role="contentinfo">
  <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap">
    <div><strong>EventFlow</strong><br><span class="small">Event planning made simple.</span></div>
    <div class="version">Version: v17.0.0</div>
    <div class="small"><a href="/blog.html">Blog</a> Â·
      <a href="/credits.html">Credits</a> Â· <a href="/contact.html">Contact</a> Â· <a href="/legal.html">Legal Hub</a></div>
  </div>
</footer>
<script src="/assets/js/components/footer-nav.js" defer></script>
<script src="/assets/js/cookie-consent.js" defer></script>

<!-- JadeAssist Chat Widget -->
<script src="https://cdn.jsdelivr.net/gh/rhysllwydlewis/JadeAssist@main/packages/widget/dist/jade-widget.js" defer></script>
<script src="/assets/js/jadeassist-init.js" defer></script>
</body>
</html>
