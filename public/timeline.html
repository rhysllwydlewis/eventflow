<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Timeline Builder â€” EventFlow</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <link rel="stylesheet" href="/assets/css/eventflow-17.0.0.css">
  <link rel="stylesheet" href="/assets/css/utilities.css">
  <link rel="stylesheet" href="/assets/css/components.css">
  <link rel="stylesheet" href="/assets/css/animations.css">
  <link rel="icon" href="/favicon.svg">
</head>
<body>
<header class="header" role="banner">
  <div class="container header-inner">
    <a class="brand" href="/" aria-label="EventFlow home">
      <span class="logo" aria-hidden="true"></span>
      <span class="brand-text">EventFlow</span>
    </a>
    <div class="header-actions">
      <nav class="nav nav-inline" aria-label="Quick navigation">
        <a href="/start.html" class="nav-link nav-main">Plan</a>
        <a href="/suppliers.html" class="nav-link nav-main">Suppliers</a>
        <a href="/auth.html" class="nav-link nav-main nav-main-login">Log in</a>
      </nav>
      <button id="notification-bell" class="icon-button" type="button" aria-label="Notifications" style="display:none;">
        <span class="notification-icon">ðŸ””</span>
        <span class="notification-badge" style="display:none;">0</span>
      </button>
      <button id="burger" class="nav-toggle" type="button" aria-label="Toggle navigation" aria-expanded="false">
        <span class="nav-toggle-bar"></span>
        <span class="nav-toggle-bar"></span>
        <span class="nav-toggle-bar"></span>
      </button>
      <button id="theme-toggle" class="icon-button" type="button" aria-label="Toggle dark mode">
        <span class="theme-icon" aria-hidden="true">
          <span class="theme-icon-sun" aria-hidden="true">â˜€</span>
          <span class="theme-icon-moon" aria-hidden="true">ðŸŒ™</span>
        </span>
      </button>
    </div>
  </div>
  <nav class="nav nav-menu" aria-label="Primary navigation">
    <a href="/start.html">Plan an Event</a>
    <a href="/suppliers.html">Suppliers</a>
    <a href="/plan.html">My Plan</a>
    <a href="/timeline.html" aria-current="page">Timeline</a>
    <a href="/budget.html">Budget</a>
    <a href="/guests.html">Guest List</a>
    <a href="/for-suppliers.html">For Suppliers</a>
    <a href="/faq.html">FAQ</a>
    <a href="/settings.html">Settings</a>
    <a href="/auth.html" id="nav-auth">Sign in</a>
    <a href="#" id="nav-dashboard" style="display:none">Dashboard</a>
    <a href="#" id="nav-signout" style="display:none">Sign out</a>
  </nav>
</header>
<script src="/assets/js/auth-nav.js" defer></script>
<script src="/assets/js/components.js" defer></script>
<script src="/assets/js/animations.js" defer></script>
<script src="/assets/js/notifications.js" defer></script>

<main class="main-content">
  <div class="container">
    <div class="page-header">
      <h1>Event Timeline</h1>
      <p class="lead">Plan and organize your event schedule with our interactive timeline builder.</p>
    </div>

    <div id="timeline-builder"></div>
  </div>
</main>

<footer class="footer" role="contentinfo">
  <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap">
    <div><strong>EventFlow</strong><br><span class="small">Event planning made simple.</span></div>
    <div class="version">Version: <span id="ef-version-label">loadingâ€¦</span></div>
    <div class="small">
      <a href="/credits.html">Credits</a> Â·
      <a href="/contact.html">Contact</a> Â·
      <a href="/terms.html">Terms</a> Â·
      <a href="/privacy.html">Privacy</a>
    </div>
  </div>
</footer>

<script src="/assets/js/app.js"></script>
<script src="/assets/js/components/timeline-builder.js"></script>
<script>
  window.__EF_PAGE__ = 'timeline';

  document.addEventListener('DOMContentLoaded', () => {
    // Load saved timeline events from localStorage
    const savedEvents = localStorage.getItem('timeline-events');
    const events = savedEvents ? JSON.parse(savedEvents) : [];

    // Initialize timeline builder
    const timeline = new TimelineBuilder({
      container: '#timeline-builder',
      events: events,
      editable: true,
      onEventAdd: (event) => {
        console.log('Event added:', event);
        saveTimeline();
        if (typeof showToast === 'function') {
          showToast('Event added to timeline', 'success');
        }
      },
      onEventUpdate: (event) => {
        console.log('Event updated:', event);
        saveTimeline();
        if (typeof showToast === 'function') {
          showToast('Event updated', 'success');
        }
      },
      onEventDelete: (eventId) => {
        console.log('Event deleted:', eventId);
        saveTimeline();
        if (typeof showToast === 'function') {
          showToast('Event removed from timeline', 'success');
        }
      },
      onEventMove: (events) => {
        console.log('Events reordered');
        saveTimeline();
      }
    });

    function saveTimeline() {
      const events = timeline.getData();
      localStorage.setItem('timeline-events', JSON.stringify(events));
    }

    // Show notification bell for logged-in users
    const user = localStorage.getItem('user');
    if (user) {
      const notificationBell = document.getElementById('notification-bell');
      if (notificationBell) {
        notificationBell.style.display = 'block';
      }
    }
  });
</script>
</body>
</html>
