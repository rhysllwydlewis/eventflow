<!DOCTYPE html>
<html lang='en-GB'>
<head>
  <script src="/assets/js/dashboard-guard.js?v=17.0.2"></script>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>
<title>Marketplace Management ‚Äî EventFlow Admin</title>
<meta name="robots" content="noindex,nofollow">
<link rel="stylesheet" href="/assets/css/tokens.css?v=18.3.0">
<link rel='stylesheet' href='/assets/css/styles.css?v=18.3.0'>
<link rel='stylesheet' href='/assets/css/eventflow-17.0.0.css?v=18.3.0'>
<link rel='stylesheet' href='/assets/css/utilities.css?v=18.3.0'>
<link rel='stylesheet' href='/assets/css/components.css?v=18.3.0'>
<link rel='stylesheet' href='/assets/css/animations.css?v=18.3.0'>
<link rel='stylesheet' href='/assets/css/admin.css?v=18.3.0'>
<link rel='stylesheet' href='/assets/css/admin-enhanced.css?v=18.3.0'>
<link rel='stylesheet' href='/assets/css/admin-navbar.css?v=18.3.0'>
<link rel='stylesheet' href='/assets/css/admin-cards.css?v=18.3.0'>
<link rel="stylesheet" href="/assets/css/mobile-optimizations.css?v=18.3.0"><link rel='stylesheet' href='/assets/css/ui-ux-fixes.css?v=18.3.0'>
<link rel="stylesheet" href="/assets/css/admin-ui-improvements.css?v=18.3.0">
<link rel='icon' href='/favicon.svg'>
<style>
  .marketplace-hero {
    position: relative;
    overflow: hidden;
    border-radius: 20px;
    padding: 28px;
    margin-bottom: 24px;
    background: linear-gradient(135deg, #042f2e, #0b8073 48%, #14b8a6);
    color: #f8fafc;
    box-shadow: 0 18px 36px rgba(15, 23, 42, 0.2);
  }
  .marketplace-hero::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at top right, rgba(255,255,255,.22), transparent 48%);
    pointer-events: none;
  }
  .marketplace-hero h1 {
    margin: 0;
    font-size: clamp(1.7rem, 3vw, 2.4rem);
    color: #fff;
  }
  .marketplace-hero p {
    margin: 10px 0 0;
    max-width: 62ch;
    color: rgba(248, 250, 252, 0.9);
  }
  .hero-actions {
    margin-top: 20px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }
  .hero-actions .cta.secondary {
    background: rgba(255, 255, 255, 0.16);
    border-color: rgba(255, 255, 255, 0.35);
    color: #fff;
  }
  .hero-actions .cta.secondary:hover {
    background: rgba(255, 255, 255, 0.24);
  }
  .hero-metrics {
    margin-top: 20px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
    gap: 10px;
  }
  .hero-metric {
    background: rgba(255, 255, 255, 0.14);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    padding: 12px;
  }
  .hero-metric .label {
    font-size: 12px;
    color: rgba(248, 250, 252, 0.82);
  }
  .hero-metric .value {
    margin-top: 6px;
    font-size: 23px;
    font-weight: 700;
    color: #fff;
  }

  .admin-stats-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 12px;
  }
  .admin-stat-card {
    border-radius: 14px;
    padding: 16px;
    border: 1px solid #e2e8f0;
    background: linear-gradient(180deg, #ffffff, #f8fafc);
    box-shadow: 0 8px 20px rgba(15, 23, 42, 0.04);
  }
  .admin-stat-label {
    color: #475569;
  }
  .admin-stat-value {
    font-size: 28px;
    line-height: 1.1;
  }
  .stat-footnote {
    margin-top: 8px;
    font-size: 12px;
    color: #64748b;
  }
  .filter-btn.active {
    background: #0B8073 !important;
    color: white !important;
    border-color: #0B8073 !important;
  }
  .filter-btn:hover {
    background: #f3f4f6;
  }
  .filter-btn.active:hover {
    background: #0a6d61 !important;
  }
  .listing-card {
    display: grid;
    grid-template-columns: 120px 1fr auto;
    gap: 18px;
    padding: 18px;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    margin-bottom: 14px;
    background: white;
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  }
  .listing-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 24px rgba(15, 23, 42, 0.08);
    border-color: #cbd5e1;
  }
  .listing-image {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius: 6px;
    background: #f3f4f6;
  }
  .listing-info h3 {
    margin: 0 0 8px 0;
    font-size: 16px;
  }
  .listing-meta {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    font-size: 13px;
    color: #6b7280;
  }
  .listing-actions {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .status-badge {
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    display: inline-block;
    text-transform: capitalize;
  }
  .status-pending { background: #fef3c7; color: #92400e; }
  .status-active { background: #d1fae5; color: #065f46; }
  .status-sold { background: #e0e7ff; color: #3730a3; }
  .status-removed { background: #fee2e2; color: #991b1b; }

  @media (max-width: 900px) {
    .marketplace-hero {
      padding: 20px;
      border-radius: 16px;
    }
    .listing-card {
      grid-template-columns: 1fr;
    }
    .listing-actions {
      flex-direction: row;
      flex-wrap: wrap;
    }
    .listing-actions .cta,
    .listing-actions .cta.secondary,
    .listing-actions .cta.ghost {
      flex: 1 1 140px;
    }
  }
</style>
<script src="/assets/js/admin-shared.js?v=18.3.0"></script>
<script src="/assets/js/components.js?v=18.3.0" defer></script>
<script src="/assets/js/admin-navbar.js?v=18.3.0" defer></script>
</head>
<body class="has-admin-navbar admin">
<!-- Modern Top Navbar -->
<nav class="admin-top-navbar">
  <div class="admin-navbar-content">
    <!-- Brand -->
    <div class="admin-navbar-brand">
      <a href="/admin.html" class="admin-navbar-logo">EventFlow</a>
      <span class="admin-navbar-title">Admin Panel</span>
    </div>

    <!-- Mobile Hamburger -->
    <button class="admin-hamburger" id="adminHamburger" aria-label="Toggle menu">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <!-- Navigation Links -->
    <div class="admin-navbar-nav" id="adminNavbarNav">
      <a href="/admin.html" class="admin-nav-btn">
        <span class="nav-icon">üìä</span>
        <span class="nav-label">Dashboard</span>
      </a>
      <a href="/admin-users.html" class="admin-nav-btn">
        <span class="nav-icon">üë•</span>
        <span class="nav-label">Users</span>
      </a>
      <a href="/admin-suppliers.html" class="admin-nav-btn">
        <span class="nav-icon">üè¢</span>
        <span class="nav-label">Suppliers</span>
      </a>
      <a href="/admin-packages.html" class="admin-nav-btn">
        <span class="nav-icon">üì¶</span>
        <span class="nav-label">Packages</span>
      </a>
      <a href="/admin-marketplace.html" class="admin-nav-btn active">
        <span class="nav-icon">üõí</span>
        <span class="nav-label">Marketplace</span>
      </a>
      <a href="/admin-photos.html" class="admin-nav-btn">
        <span class="nav-icon">üì∏</span>
        <span class="nav-label">Photos</span>
      </a>
      <a href="/admin-content.html" class="admin-nav-btn">
        <span class="nav-icon">üìù</span>
        <span class="nav-label">Content</span>
      </a>
      <a href="/admin-settings.html" class="admin-nav-btn">
        <span class="nav-icon">‚öôÔ∏è</span>
        <span class="nav-label">Settings</span>
      </a>
      <div class="admin-navbar-divider"></div>
      <a href="/" class="admin-nav-btn">
        <span class="nav-icon">üè†</span>
        <span class="nav-label">Site</span>
      </a>
      <button class="admin-nav-btn" id="signoutBtn">
        <span class="nav-icon">üö™</span>
        <span class="nav-label">Sign Out</span>
      </button>
    </div>
  </div>
</nav>

<main id="main-content" class="admin-content" style="padding-top:80px;">
  <div class="container" style="max-width:1200px">
    <section class="marketplace-hero">
      <h1>üõí Marketplace Management</h1>
      <p>Moderate listings faster with live approval insights, conversion health, and streamlined controls for operations.</p>
      <div class="hero-actions">
        <button class="cta" id="heroReviewPendingBtn">Review Pending Listings</button>
        <button class="cta secondary" id="heroRefreshBtn">Refresh Overview</button>
      </div>
      <div class="hero-metrics">
        <div class="hero-metric">
          <div class="label">Approval rate</div>
          <div class="value" id="hero-approval-rate">0%</div>
        </div>
        <div class="hero-metric">
          <div class="label">Sell-through rate</div>
          <div class="value" id="hero-sell-through">0%</div>
        </div>
        <div class="hero-metric">
          <div class="label">Pending oldest age</div>
          <div class="value" id="hero-pending-age">‚Äî</div>
        </div>
      </div>
    </section>

    <!-- Stats -->
    <div class="admin-stats-row" style="margin-bottom:24px">
      <div class="admin-stat-card">
        <div class="admin-stat-value" id="stat-total">0</div>
        <div class="admin-stat-label">Total Listings</div>
        <div class="stat-footnote" id="stat-total-footnote">All listing states</div>
      </div>
      <div class="admin-stat-card">
        <div class="admin-stat-value" id="stat-pending">0</div>
        <div class="admin-stat-label">Pending Approval</div>
        <div class="stat-footnote" id="stat-pending-footnote">Needs moderation</div>
      </div>
      <div class="admin-stat-card">
        <div class="admin-stat-value" id="stat-active">0</div>
        <div class="admin-stat-label">Active Listings</div>
        <div class="stat-footnote" id="stat-active-footnote">Live in marketplace</div>
      </div>
      <div class="admin-stat-card">
        <div class="admin-stat-value" id="stat-sold">0</div>
        <div class="admin-stat-label">Sold</div>
        <div class="stat-footnote" id="stat-sold-footnote">Completed transactions</div>
      </div>
    </div>

    <!-- Filters -->
    <div class="card" style="margin-bottom:24px">
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="pending">Pending</button>
        <button class="filter-btn" data-filter="active">Active</button>
        <button class="filter-btn" data-filter="sold">Sold</button>
        <button class="filter-btn" data-filter="removed">Removed</button>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
        <input type="text" id="searchInput" placeholder="Search listings..." style="flex:1;min-width:200px">
        <select id="categoryFilter">
          <option value="">All Categories</option>
          <option value="attire">Attire</option>
          <option value="decor">D√©cor</option>
          <option value="av-equipment">AV Equipment</option>
          <option value="photography">Photography</option>
          <option value="party-supplies">Party Supplies</option>
          <option value="florals">Florals</option>
        </select>
        <button class="cta secondary" id="exportListingsBtn" title="Export listings to CSV">
          üì• Export
        </button>
        <button class="cta secondary" id="refreshListingsBtn" title="Refresh listings">
          üîÑ Refresh
        </button>
      </div>
      <p class="small" id="lastUpdatedText" style="margin:8px 0 0 0;color:#6b7280;">Last updated: ‚Äî</p>
    </div>

    <!-- Bulk Actions Bar -->
    <div id="bulkActionsBar" style="display:none;margin-bottom:16px;padding:12px 16px;background:#f3f4f6;border-radius:8px;align-items:center;gap:12px;">
      <input type="checkbox" id="selectAll" style="cursor:pointer">
      <span id="selectedCount" style="flex:1;font-weight:500;">0 selected</span>
      <button class="cta" data-action="bulk-approve" style="padding:6px 12px;font-size:14px;">Approve Selected</button>
      <button class="cta secondary" data-action="bulk-mark-sold" style="padding:6px 12px;font-size:14px;">Mark Sold</button>
      <button class="cta ghost" data-action="bulk-delete" style="padding:6px 12px;font-size:14px;">Delete Selected</button>
    </div>

    <!-- Listings -->
    <div id="listings-container">
      <div class="card"><p>Loading listings...</p></div>
    </div>
  </div>
</main>

<footer class="footer" role="contentinfo">
  <div class="container flex-between">
    <div><strong>EventFlow</strong><br><span class="small">Admin Panel</span></div>
    <div class="small"><a href="/admin.html">Dashboard</a> ¬∑ <a href="/legal">Legal Hub</a> ¬∑ <button type="button" data-cookie-prefs style="background:none;border:none;color:inherit;text-decoration:underline;cursor:pointer;font-size:inherit;padding:0;">Cookie preferences</button></div>
  </div>
</footer>

<script src="/assets/js/pages/admin-marketplace-init.js?v=18.3.0" defer></script>
<script src="/assets/js/cookie-consent.js?v=2.0.0" defer></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelector('[data-action="bulk-approve"]').addEventListener('click', function () { bulkApprove(); });
    document.querySelector('[data-action="bulk-mark-sold"]').addEventListener('click', function () { bulkMarkSold(); });
    document.querySelector('[data-action="bulk-delete"]').addEventListener('click', function () { bulkDelete(); });
  });
</script>
</body>
</html>
